export DEMO_ENV_NAME=jlabdemo

# Create a new environment
conda create -y -n $DEMO_ENV_NAME python=3.5 notebook pandas=0.19.2 matplotlib=2.0.0 scikit-image=0.12.3
source activate $DEMO_ENV_NAME

# Install the environment kernel
ipython kernel install --name $DEMO_ENV_NAME --display-name $DEMO_ENV_NAME --sys-prefix

# Install most recent notebook
conda install -y -c conda-forge notebook=5.0.0

# Install node
conda install -c conda-forge nodejs=6.11.0

# Install jupyterlab
conda install -y -c conda-forge jupyterlab=0.24.1


# Install google-drive
jupyter labextension install @jupyterlab/google-drive
jupyter lab clean && jupyter lab build

# OPTIONAL

# graphviz (for dask)
brew install graphviz
pip install graphviz # conda install graphviz doesn't seem to work


# To remove the environment
# source deactivate $DEMO_ENV_NAME
# conda remove --all -n $DEMO_ENV_NAME